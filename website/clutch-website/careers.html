<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Careers - Clutch</title>
    <meta name="description" content="Join the Clutch team and help us build the future of automotive technology. Explore exciting career opportunities.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Design.json Compliant Styles -->
    <style>
        :root {
            /* Light theme colors from design.json */
            --background: oklch(1 0 0);
            --foreground: oklch(0.1450 0 0);
            --card: oklch(1 0 0);
            --card-foreground: oklch(0.1450 0 0);
            --primary: oklch(0.5770 0.2450 27.3250);
            --primary-foreground: oklch(0.9850 0 0);
            --secondary: oklch(0.5770 0.2450 27.3250);
            --muted: oklch(0.9700 0 0);
            --muted-foreground: oklch(0.5560 0 0);
            --border: oklch(0.9220 0 0);
            --input: oklch(0.9220 0 0);
            --ring: oklch(0.7080 0 0);
            --success: oklch(0.72 0.2 145);
            --warning: oklch(0.85 0.18 75);
            --info: oklch(0.75 0.1 220);
        }

        body {
            font-family: 'Roboto', ui-sans-serif, sans-serif, system-ui;
            background-color: var(--background);
            color: var(--foreground);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }
        
        .job-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background-color: var(--card);
            border: 1px solid var(--border);
            border-radius: 0.625rem;
        }
        
        .job-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 2px 4px -1px hsl(0 0% 0% / 0.10);
        }
        
        .filter-btn {
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 0.625rem;
        }
        
        .filter-btn.active {
            background-color: var(--primary);
            color: var(--primary-foreground);
        }
        
        .loading {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center">
                        <img src="LogoRed.svg" alt="Clutch" class="h-8 w-auto">
                        <span class="ml-2 text-xl font-bold text-gray-900">Clutch</span>
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-600 hover:text-gray-900">Home</a>
                    <a href="index.html#services" class="text-gray-600 hover:text-gray-900">Services</a>
                    <a href="index.html#mission" class="text-gray-600 hover:text-gray-900">Mission</a>
                    <a href="careers.html" class="text-blue-600 font-medium">Careers</a>
                    <a href="index.html#download" class="text-gray-600 hover:text-gray-900">Download</a>
                    <a href="index.html#contact" class="text-gray-600 hover:text-gray-900">Contact</a>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-gray-600 hover:text-gray-900">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6">
                Join Our Team
            </h1>
            <p class="text-xl md:text-2xl mb-8 text-blue-100">
                Build the future of automotive technology with us
            </p>
            <div class="max-w-2xl mx-auto">
                <div class="relative">
                    <input 
                        type="text" 
                        id="hero-search"
                        placeholder="Search for jobs..." 
                        class="w-full px-6 py-4 rounded-lg text-gray-900 text-lg focus:outline-none focus:ring-4 focus:ring-blue-300"
                    >
                    <button 
                        id="hero-search-btn"
                        class="absolute right-2 top-2 bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors"
                    >
                        Search
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Filters Section -->
    <section class="bg-white py-8 border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-wrap items-center gap-4">
                <div class="flex items-center space-x-2">
                    <span class="text-gray-600 font-medium">Filter by:</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <button class="filter-btn active px-4 py-2 rounded-full border border-gray-300 text-sm hover:bg-gray-50" data-filter="all">
                        All Jobs
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 text-sm hover:bg-gray-50" data-filter="department">
                        Department
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 text-sm hover:bg-gray-50" data-filter="location">
                        Location
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full border border-gray-300 text-sm hover:bg-gray-50" data-filter="type">
                        Employment Type
                    </button>
                </div>
                
                <div class="ml-auto">
                    <select id="sort-select" class="px-4 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="title">Job Title A-Z</option>
                        <option value="department">Department</option>
                    </select>
                </div>
            </div>
        </div>
    </section>

    <!-- Jobs Section -->
    <section class="py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Loading State -->
            <div id="loading" class="text-center py-12">
                <div class="loading inline-block w-8 h-8 bg-blue-600 rounded-full"></div>
                <p class="mt-4 text-gray-600">Loading jobs...</p>
            </div>

            <!-- Jobs Grid -->
            <div id="jobs-container" class="hidden">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-2xl font-bold text-gray-900">
                        <span id="jobs-count">0</span> Open Positions
                    </h2>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-600">View:</span>
                        <button id="grid-view" class="p-2 rounded-md bg-blue-100 text-blue-600">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                            </svg>
                        </button>
                        <button id="list-view" class="p-2 rounded-md text-gray-400 hover:text-gray-600">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <div id="jobs-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Jobs will be populated here -->
                </div>

                <!-- Pagination -->
                <div id="pagination" class="mt-12 flex justify-center">
                    <!-- Pagination will be populated here -->
                </div>
            </div>

            <!-- No Jobs State -->
            <div id="no-jobs" class="hidden text-center py-12">
                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6" />
                </svg>
                <h3 class="mt-2 text-sm font-medium text-gray-900">No jobs found</h3>
                <p class="mt-1 text-sm text-gray-500">Try adjusting your search criteria.</p>
            </div>
        </div>
    </section>

    <!-- Why Work With Us Section -->
    <section class="bg-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Why Work With Us?</h2>
                <p class="text-xl text-gray-600">We're building the future of automotive technology</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Innovation</h3>
                    <p class="text-gray-600">Work on cutting-edge automotive technology and shape the future of mobility.</p>
                </div>
                
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Great Team</h3>
                    <p class="text-gray-600">Join a diverse team of passionate professionals who love what they do.</p>
                </div>
                
                <div class="text-center">
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-2">Competitive Benefits</h3>
                    <p class="text-gray-600">Enjoy competitive salary, health insurance, flexible hours, and more.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <img src="LogoRed.svg" alt="Clutch" class="h-8 w-auto">
                        <span class="ml-2 text-xl font-bold">Clutch</span>
                    </div>
                    <p class="text-gray-400">Building the future of automotive technology.</p>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Company</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html#mission" class="text-gray-400 hover:text-white">About</a></li>
                        <li><a href="careers.html" class="text-gray-400 hover:text-white">Careers</a></li>
                        <li><a href="index.html#contact" class="text-gray-400 hover:text-white">Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Services</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html#services" class="text-gray-400 hover:text-white">Auto Parts</a></li>
                        <li><a href="index.html#services" class="text-gray-400 hover:text-white">Fleet Management</a></li>
                        <li><a href="index.html#services" class="text-gray-400 hover:text-white">Analytics</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Connect</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center text-gray-400">
                    <div class="flex items-center space-x-4 mb-4 md:mb-0">
                        <a href="privacy-policy.html" class="hover:text-white transition-colors">Privacy Policy</a>
                        <span>|</span>
                        <a href="privacy/delete-account.html" class="hover:text-white transition-colors">Delete Account</a>
                        <span>|</span>
                        <a href="index.html" class="hover:text-white transition-colors">Home</a>
                    </div>
                    <p>&copy; 2024 Clutch. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Job Application Modal -->
    <div id="application-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">Apply for Position</h2>
                        <button id="close-modal" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <div id="job-details" class="mb-6">
                        <!-- Job details will be populated here -->
                    </div>
                    
                    <form id="application-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="first-name" class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
                                <input type="text" id="first-name" name="firstName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label for="last-name" class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
                                <input type="text" id="last-name" name="lastName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>
                        
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                            <input type="email" id="email" name="email" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                            <input type="tel" id="phone" name="phone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label for="location" class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                            <input type="text" id="location" name="location" placeholder="City, Country" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label for="resume" class="block text-sm font-medium text-gray-700 mb-1">Resume *</label>
                            <input type="file" id="resume" name="resume" accept=".pdf,.doc,.docx" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <p class="text-sm text-gray-500 mt-1">PDF, DOC, or DOCX files only (max 5MB)</p>
                        </div>
                        
                        <div>
                            <label for="cover-letter" class="block text-sm font-medium text-gray-700 mb-1">Cover Letter</label>
                            <textarea id="cover-letter" name="coverLetter" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                        </div>
                        
                        <div class="flex items-start">
                            <input type="checkbox" id="consent" name="consent" required class="mt-1 mr-2">
                            <label for="consent" class="text-sm text-gray-700">
                                I consent to the processing of my personal data for recruitment purposes. *
                            </label>
                        </div>
                        
                        <div class="flex items-start">
                            <input type="checkbox" id="communication" name="communication" required class="mt-1 mr-2">
                            <label for="communication" class="text-sm text-gray-700">
                                I agree to receive communication regarding my application. *
                            </label>
                        </div>
                        
                        <div class="flex justify-end space-x-4">
                            <button type="button" id="cancel-application" class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                                Cancel
                            </button>
                            <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                                Submit Application
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Global variables
        let allJobs = [];
        let filteredJobs = [];
        let currentPage = 1;
        const jobsPerPage = 9;
        let currentView = 'grid';

        // API Configuration
        const API_BASE_URL = 'https://clutch-main-nk7x.onrender.com/api/v1/careers';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadJobs();
            setupEventListeners();
        });

        // Load jobs from API
        async function loadJobs() {
            try {
                const response = await fetch(`${API_BASE_URL}/jobs`);
                const data = await response.json();
                
                if (data.success) {
                    allJobs = data.data.jobs || [];
                    filteredJobs = [...allJobs];
                    displayJobs();
                    updateJobsCount();
                } else {
                    showNoJobs();
                }
            } catch (error) {
                console.error('Error loading jobs:', error);
                showNoJobs();
            } finally {
                hideLoading();
            }
        }

        // Display jobs
        function displayJobs() {
            const container = document.getElementById('jobs-grid');
            const startIndex = (currentPage - 1) * jobsPerPage;
            const endIndex = startIndex + jobsPerPage;
            const jobsToShow = filteredJobs.slice(startIndex, endIndex);

            if (jobsToShow.length === 0) {
                showNoJobs();
                return;
            }

            container.innerHTML = jobsToShow.map(job => createJobCard(job)).join('');
            updatePagination();
            showJobsContainer();
        }

        // Create job card HTML
        function createJobCard(job) {
            const publishedDate = new Date(job.publishedDate || job.createdAt).toLocaleDateString();
            const salary = job.salary && job.salary.min > 0 && job.salary.max > 0 
                ? `${job.salary.min.toLocaleString()} - ${job.salary.max.toLocaleString()} ${job.salary.currency}`
                : 'Salary not specified';

            return `
                <div class="job-card bg-white rounded-lg shadow-md p-6 fade-in">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-900 mb-2">${job.title}</h3>
                            <p class="text-gray-600">${job.department}</p>
                        </div>
                        <span class="px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full">
                            ${job.employmentType}
                        </span>
                    </div>
                    
                    <div class="space-y-2 mb-4">
                        <div class="flex items-center text-sm text-gray-600">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            ${job.locations && job.locations.length > 0 
                                ? job.locations.map(loc => `${loc.city}, ${loc.country}`).join(', ')
                                : 'Remote'
                            }
                        </div>
                        <div class="flex items-center text-sm text-gray-600">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                            </svg>
                            ${salary}
                        </div>
                        <div class="flex items-center text-sm text-gray-600">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Posted ${publishedDate}
                        </div>
                    </div>
                    
                    <p class="text-gray-700 text-sm mb-4 line-clamp-3">
                        ${job.description ? job.description.substring(0, 150) + '...' : 'No description available'}
                    </p>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex flex-wrap gap-2">
                            ${job.skills && job.skills.slice(0, 3).map(skill => 
                                `<span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">${skill}</span>`
                            ).join('')}
                        </div>
                        <button 
                            onclick="openApplicationModal('${job._id}')"
                            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"
                        >
                            Apply Now
                        </button>
                    </div>
                </div>
            `;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Search functionality
            document.getElementById('hero-search-btn').addEventListener('click', handleSearch);
            document.getElementById('hero-search').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleSearch();
                }
            });

            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    // Add filter logic here
                });
            });

            // Sort functionality
            document.getElementById('sort-select').addEventListener('change', handleSort);

            // View toggle
            document.getElementById('grid-view').addEventListener('click', () => setView('grid'));
            document.getElementById('list-view').addEventListener('click', () => setView('list'));

            // Application modal
            document.getElementById('close-modal').addEventListener('click', closeApplicationModal);
            document.getElementById('cancel-application').addEventListener('click', closeApplicationModal);
            document.getElementById('application-form').addEventListener('submit', handleApplicationSubmit);
        }

        // Handle search
        function handleSearch() {
            const query = document.getElementById('hero-search').value.toLowerCase();
            filteredJobs = allJobs.filter(job => 
                job.title.toLowerCase().includes(query) ||
                job.department.toLowerCase().includes(query) ||
                job.description.toLowerCase().includes(query)
            );
            currentPage = 1;
            displayJobs();
            updateJobsCount();
        }

        // Handle sort
        function handleSort() {
            const sortBy = document.getElementById('sort-select').value;
            filteredJobs.sort((a, b) => {
                switch (sortBy) {
                    case 'newest':
                        return new Date(b.publishedDate || b.createdAt) - new Date(a.publishedDate || a.createdAt);
                    case 'oldest':
                        return new Date(a.publishedDate || a.createdAt) - new Date(b.publishedDate || b.createdAt);
                    case 'title':
                        return a.title.localeCompare(b.title);
                    case 'department':
                        return a.department.localeCompare(b.department);
                    default:
                        return 0;
                }
            });
            currentPage = 1;
            displayJobs();
        }

        // Set view mode
        function setView(view) {
            currentView = view;
            const gridBtn = document.getElementById('grid-view');
            const listBtn = document.getElementById('list-view');
            
            if (view === 'grid') {
                gridBtn.classList.add('bg-blue-100', 'text-blue-600');
                gridBtn.classList.remove('text-gray-400');
                listBtn.classList.remove('bg-blue-100', 'text-blue-600');
                listBtn.classList.add('text-gray-400');
                document.getElementById('jobs-grid').className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6';
            } else {
                listBtn.classList.add('bg-blue-100', 'text-blue-600');
                listBtn.classList.remove('text-gray-400');
                gridBtn.classList.remove('bg-blue-100', 'text-blue-600');
                gridBtn.classList.add('text-gray-400');
                document.getElementById('jobs-grid').className = 'space-y-4';
            }
        }

        // Open application modal
        function openApplicationModal(jobId) {
            const job = allJobs.find(j => j._id === jobId);
            if (!job) return;

            document.getElementById('job-details').innerHTML = `
                <div class="bg-gray-50 rounded-lg p-4">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">${job.title}</h3>
                    <p class="text-gray-600 mb-2">${job.department}</p>
                    <p class="text-sm text-gray-700">${job.description ? job.description.substring(0, 200) + '...' : 'No description available'}</p>
                </div>
            `;

            document.getElementById('application-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // Close application modal
        function closeApplicationModal() {
            document.getElementById('application-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            document.getElementById('application-form').reset();
        }

        // Handle application submission
        async function handleApplicationSubmit(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const jobId = document.querySelector('[onclick*="openApplicationModal"]')?.onclick.toString().match(/'([^']+)'/)?.[1];
            
            if (!jobId) {
                alert('Job ID not found');
                return;
            }

            const applicationData = {
                job: jobId,
                candidate: {
                    firstName: formData.get('firstName'),
                    lastName: formData.get('lastName'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    location: {
                        city: formData.get('location')?.split(',')[0]?.trim(),
                        country: formData.get('location')?.split(',')[1]?.trim() || 'Egypt'
                    }
                },
                consent: {
                    dataProcessing: formData.get('consent') === 'on',
                    communication: formData.get('communication') === 'on'
                }
            };

            try {
                const response = await fetch(`${API_BASE_URL}/jobs/${jobId}/apply`, {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();
                
                if (result.success) {
                    alert('Application submitted successfully!');
                    closeApplicationModal();
                } else {
                    alert('Failed to submit application: ' + (result.message || 'Unknown error'));
                }
            } catch (error) {
                console.error('Error submitting application:', error);
                alert('Failed to submit application. Please try again.');
            }
        }

        // Update jobs count
        function updateJobsCount() {
            document.getElementById('jobs-count').textContent = filteredJobs.length;
        }

        // Update pagination
        function updatePagination() {
            const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            let paginationHTML = '<div class="flex items-center space-x-2">';
            
            // Previous button
            if (currentPage > 1) {
                paginationHTML += `<button onclick="changePage(${currentPage - 1})" class="px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50">Previous</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === currentPage) {
                    paginationHTML += `<button class="px-3 py-2 bg-blue-600 text-white rounded-md text-sm">${i}</button>`;
                } else {
                    paginationHTML += `<button onclick="changePage(${i})" class="px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50">${i}</button>`;
                }
            }
            
            // Next button
            if (currentPage < totalPages) {
                paginationHTML += `<button onclick="changePage(${currentPage + 1})" class="px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50">Next</button>`;
            }
            
            paginationHTML += '</div>';
            pagination.innerHTML = paginationHTML;
        }

        // Change page
        function changePage(page) {
            currentPage = page;
            displayJobs();
        }

        // Show/hide loading state
        function hideLoading() {
            document.getElementById('loading').classList.add('hidden');
        }

        function showJobsContainer() {
            document.getElementById('jobs-container').classList.remove('hidden');
            document.getElementById('no-jobs').classList.add('hidden');
        }

        function showNoJobs() {
            document.getElementById('jobs-container').classList.add('hidden');
            document.getElementById('no-jobs').classList.remove('hidden');
        }
    </script>
</body>
</html>
