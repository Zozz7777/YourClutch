@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* RTL Support */
  [dir="rtl"] {
    direction: rtl;
  }
  
  [dir="ltr"] {
    direction: ltr;
  }

  /* RTL Layout Support for main layout */
  [dir="rtl"] .main-layout {
    flex-direction: row-reverse !important;
  }
  
  [dir="ltr"] .main-layout {
    flex-direction: row !important;
  }

  /* RTL Sidebar border positioning */
  [dir="rtl"] .sidebar-border {
    border-left: 1px solid var(--border) !important;
    border-right: none !important;
  }
  
  [dir="ltr"] .sidebar-border {
    border-right: 1px solid var(--border) !important;
    border-left: none !important;
  }

  /* Force RTL layout order */
  [dir="rtl"] .main-layout > *:first-child {
    order: 2;
  }
  
  [dir="rtl"] .main-layout > *:last-child {
    order: 1;
  }
  
  [dir="ltr"] .main-layout > *:first-child {
    order: 1;
  }
  
  [dir="ltr"] .main-layout > *:last-child {
    order: 2;
  }

  :root {
    /* Light theme colors from design.json - exact OKLCH values */
    --background: oklch(1 0 0);
    --foreground: oklch(0.1450 0 0);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.1450 0 0);
    --primary: oklch(0.5770 0.2450 27.3250);
    --primary-foreground: oklch(0.9850 0 0);
    --secondary: oklch(0.5770 0.2450 27.3250);
    --muted: oklch(0.9700 0 0);
    --muted-foreground: oklch(0.5560 0 0);
    --destructive: oklch(0.5770 0.2450 27.3250);
    --destructive-foreground: oklch(0.9850 0 0);
    --border: oklch(0.9220 0 0);
    --input: oklch(0.9220 0 0);
    --ring: oklch(0.7080 0 0);
    --ring-ring: oklch(0.7080 0 0);
    --sidebar: oklch(0.9850 0 0);
    --sidebar-primary: oklch(0.5770 0.2450 27.3250);
    --radius: 0.625rem;
    
    /* Semantic color variants from design.json - exact OKLCH values */
    --success: oklch(0.72 0.2 145);
    --success-foreground: oklch(0.9850 0 0);
    --warning: oklch(0.85 0.18 75);
    --warning-foreground: oklch(0.1450 0 0);
    --error: oklch(0.5770 0.2450 27.3250); /* Same as destructive */
    --error-foreground: oklch(0.9850 0 0);
    --info: oklch(0.75 0.1 220);
    --info-foreground: oklch(0.9850 0 0);
    
    /* Typography from design.json - using next/font/google variables */
    --font-sans: var(--font-roboto), ui-sans-serif, sans-serif, system-ui;
    --font-serif: var(--font-roboto-serif), ui-serif, serif;
    --font-mono: var(--font-roboto-mono), ui-monospace, monospace;
  }

  .dark {
    /* Dark theme colors from design.json - exact OKLCH values */
    --background: oklch(0.1450 0 0);
    --foreground: oklch(0.9850 0 0);
    --card: oklch(0.2050 0 0);
    --card-foreground: oklch(0.9710 0.0130 17.3800);
    --primary: oklch(0.5050 0.2130 27.5180);
    --primary-foreground: oklch(0.2050 0 0);
    --secondary: oklch(0.2690 0 0);
    --muted: oklch(0.2690 0 0);
    --muted-foreground: oklch(0.5560 0 0);
    --destructive: oklch(0.7040 0.1910 22.2160);
    --destructive-foreground: oklch(0.9850 0 0);
    --border: oklch(0.2750 0 0);
    --input: oklch(0.3250 0 0);
    --ring: oklch(0.5560 0 0);
    --ring-ring: oklch(0.5560 0 0);
    --sidebar: oklch(0.2050 0 0);
    --sidebar-primary: oklch(0.5770 0.2450 27.3250);
    
    /* Semantic color variants for dark theme from design.json - exact OKLCH values */
    --success: oklch(0.72 0.2 145);
    --success-foreground: oklch(0.2050 0 0);
    --warning: oklch(0.85 0.18 75);
    --warning-foreground: oklch(0.2050 0 0);
    --error: oklch(0.7040 0.1910 22.2160); /* Same as destructive */
    --error-foreground: oklch(0.9850 0 0);
    --info: oklch(0.75 0.1 220);
    --info-foreground: oklch(0.2050 0 0);
  }
}

@layer base {
  body {
    background-color: var(--background);
    color: var(--foreground);
    font-family: var(--font-sans);
    font-feature-settings: "rlig" 1, "calt" 1;
  }
  
  /* Custom scrollbar using design system colors */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background-color: var(--muted);
    border-radius: var(--radius);
  }
  
  ::-webkit-scrollbar-thumb {
    background-color: var(--border);
    border-radius: var(--radius);
    border: 2px solid var(--muted);
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--muted-foreground);
  }
  
  ::-webkit-scrollbar-thumb:active {
    background-color: var(--foreground);
  }
  
  ::-webkit-scrollbar-corner {
    background-color: var(--muted);
  }
}

@layer components {
  /* Custom component styles */
  .card-hover {
    transition: all 0.2s ease-in-out;
  }
  
  .card-hover:hover {
    box-shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 2px 4px -1px hsl(0 0% 0% / 0.10);
    transform: translateY(-4px);
  }
  
  .sidebar-item {
    transition: background-color 0.2s ease-in-out;
  }
  
  .sidebar-item:hover {
    background-color: oklch(from var(--sidebar-primary) l c h / 0.1);
  }
  
  .sidebar-item.active {
    background-color: var(--sidebar-primary);
    color: var(--primary-foreground);
  }
  
  /* Comprehensive animation system */
  .animate-pulse-slow {
    animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  
  .animate-bounce-slow {
    animation: bounce 2s infinite;
  }
  
  .animate-fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }
  
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  .animate-slide-down {
    animation: slideDown 0.3s ease-out;
  }
  
  .animate-scale-in {
    animation: scaleIn 0.2s ease-out;
  }
  
  .animate-scale-out {
    animation: scaleOut 0.2s ease-in;
  }
  
  /* Animation keyframes */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slideUp {
    from { 
      opacity: 0;
      transform: translateY(10px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideDown {
    from { 
      opacity: 0;
      transform: translateY(-10px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes scaleIn {
    from { 
      opacity: 0;
      transform: scale(0.95);
    }
    to { 
      opacity: 1;
      transform: scale(1);
    }
  }
  
  @keyframes scaleOut {
    from { 
      opacity: 1;
      transform: scale(1);
    }
    to { 
      opacity: 0;
      transform: scale(0.95);
    }
  }
  
  /* Custom shadows from design.json - these are now handled by Tailwind config */
}

@layer utilities {
  /* Custom utilities - only keep what's actually used */
  .text-balance {
    text-wrap: balance;
  }
  
  /* Grid pattern using design tokens */
  .bg-grid-pattern {
    background-image: 
      linear-gradient(hsl(var(--border)) 1px, transparent 1px),
      linear-gradient(90deg, hsl(var(--border)) 1px, transparent 1px);
    background-size: 20px 20px;
  }
  
  /* Enhanced focus states for all interactive elements */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background;
  }
  
  .focus-ring-inset {
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-inset;
  }
  
  /* Interactive element base styles */
  .interactive {
    @apply transition-colors duration-normal ease-in-out;
  }
  
  .interactive:hover {
    @apply cursor-pointer;
  }
  
  .interactive:disabled {
    @apply cursor-not-allowed opacity-50;
  }
  
  /* Enhanced transition utilities */
  .transition-fast {
    @apply transition-all duration-fast ease-in-out;
  }
  
  .transition-normal {
    @apply transition-all duration-normal ease-in-out;
  }
  
  .transition-slow {
    @apply transition-all duration-slow ease-in-out;
  }
  
  /* Button focus states */
  .btn-focus {
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background;
  }
  
  /* Input focus states */
  .input-focus {
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring;
  }
  
  /* Link focus states */
  .link-focus {
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background rounded-sm;
  }
  
  /* Accessibility enhancements */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  
  .not-sr-only {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
  
  /* ARIA live regions */
  .aria-live-polite {
    @apply sr-only;
  }
  
  .aria-live-assertive {
    @apply sr-only;
  }
  
  /* Focus management */
  .focus-trap {
    @apply focus:outline-none;
  }
  
  .focus-visible-only {
    @apply focus:outline-none focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2;
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .high-contrast-border {
      @apply border-2 border-foreground;
    }
  }
  
  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .animate-fade-in,
    .animate-fade-in-fast,
    .animate-fade-in-slow,
    .animate-slide-up,
    .animate-slide-up-fast,
    .animate-slide-up-slow,
    .animate-slide-down,
    .animate-slide-down-fast,
    .animate-slide-down-slow,
    .animate-scale-in,
    .animate-scale-in-fast,
    .animate-scale-in-slow,
    .animate-scale-out,
    .animate-scale-out-fast,
    .animate-scale-out-slow,
    .animate-pulse-slow,
    .animate-bounce-slow {
      animation: none;
    }
    
    .transition-fast,
    .transition-normal,
    .transition-slow {
      transition: none;
    }
  }
}